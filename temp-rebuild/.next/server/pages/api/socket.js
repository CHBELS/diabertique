"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/socket";
exports.ids = ["pages/api/socket"];
exports.modules = {

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "socket.io":
/*!****************************!*\
  !*** external "socket.io" ***!
  \****************************/
/***/ ((module) => {

module.exports = import("socket.io");;

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fsocket&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Csocket.js&middlewareConfigBase64=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fsocket&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Csocket.js&middlewareConfigBase64=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _src_pages_api_socket_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src\\pages\\api\\socket.js */ \"(api)/./src/pages/api/socket.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_src_pages_api_socket_js__WEBPACK_IMPORTED_MODULE_3__]);\n_src_pages_api_socket_js__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_socket_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_socket_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/socket\",\n        pathname: \"/api/socket\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _src_pages_api_socket_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRnNvY2tldCZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnNyYyU1Q3BhZ2VzJTVDYXBpJTVDc29ja2V0LmpzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNMO0FBQzFEO0FBQ3lEO0FBQ3pEO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQyxxREFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMscURBQVE7QUFDcEM7QUFDTyx3QkFBd0IsZ0hBQW1CO0FBQ2xEO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVELHFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGlhYmVydGlxdWUvP2Y4ZTUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3NyY1xcXFxwYWdlc1xcXFxhcGlcXFxcc29ja2V0LmpzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsIFwiZGVmYXVsdFwiKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsIFwiY29uZmlnXCIpO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5leHBvcnQgY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgUGFnZXNBUElSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuUEFHRVNfQVBJLFxuICAgICAgICBwYWdlOiBcIi9hcGkvc29ja2V0XCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvc29ja2V0XCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogXCJcIixcbiAgICAgICAgZmlsZW5hbWU6IFwiXCJcbiAgICB9LFxuICAgIHVzZXJsYW5kXG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMtYXBpLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fsocket&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Csocket.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./src/pages/api/socket.js":
/*!*********************************!*\
  !*** ./src/pages/api/socket.js ***!
  \*********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (/* binding */ SocketHandler)\n/* harmony export */ });\n/* harmony import */ var _server_socket_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../server/socket-server */ \"(api)/./src/server/socket-server.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_server_socket_server__WEBPACK_IMPORTED_MODULE_0__]);\n_server_socket_server__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n// API endpoint pour Socket.IO\n\n// Variable pour stocker l'instance du serveur Socket.IO\nlet socketServer;\n// Handler Next.js pour Socket.IO\nfunction SocketHandler(req, res) {\n    // Vérifier si Socket.IO a déjà été initialisé\n    if (!socketServer) {\n        console.log(\"Initialisation du serveur Socket.IO\");\n        // Créer une nouvelle instance du serveur Socket.IO\n        socketServer = (0,_server_socket_server__WEBPACK_IMPORTED_MODULE_0__.createSocketServer)(res.socket.server);\n    }\n    // Résoudre la requête en renvoyant OK\n    // Socket.IO gère désormais la connexion WebSocket\n    res.end(\"Socket.IO est pr\\xeat\");\n}\n// Désactiver la mise en forme des requêtes pour permettre les WebSockets\nconst config = {\n    api: {\n        bodyParser: false\n    }\n};\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvcGFnZXMvYXBpL3NvY2tldC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQSw4QkFBOEI7QUFDa0M7QUFFaEUsd0RBQXdEO0FBQ3hELElBQUlDO0FBRUosaUNBQWlDO0FBQ2xCLFNBQVNDLGNBQWNDLEdBQUcsRUFBRUMsR0FBRztJQUM1Qyw4Q0FBOEM7SUFDOUMsSUFBSSxDQUFDSCxjQUFjO1FBQ2pCSSxRQUFRQyxHQUFHLENBQUM7UUFDWixtREFBbUQ7UUFDbkRMLGVBQWVELHlFQUFrQkEsQ0FBQ0ksSUFBSUcsTUFBTSxDQUFDQyxNQUFNO0lBQ3JEO0lBRUEsc0NBQXNDO0lBQ3RDLGtEQUFrRDtJQUNsREosSUFBSUssR0FBRyxDQUFDO0FBQ1Y7QUFFQSx5RUFBeUU7QUFDbEUsTUFBTUMsU0FBUztJQUNwQkMsS0FBSztRQUNIQyxZQUFZO0lBQ2Q7QUFDRixFQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGlhYmVydGlxdWUvLi9zcmMvcGFnZXMvYXBpL3NvY2tldC5qcz8yZGIwIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIEFQSSBlbmRwb2ludCBwb3VyIFNvY2tldC5JT1xyXG5pbXBvcnQgeyBjcmVhdGVTb2NrZXRTZXJ2ZXIgfSBmcm9tICcuLi8uLi9zZXJ2ZXIvc29ja2V0LXNlcnZlcic7XHJcblxyXG4vLyBWYXJpYWJsZSBwb3VyIHN0b2NrZXIgbCdpbnN0YW5jZSBkdSBzZXJ2ZXVyIFNvY2tldC5JT1xyXG5sZXQgc29ja2V0U2VydmVyO1xyXG5cclxuLy8gSGFuZGxlciBOZXh0LmpzIHBvdXIgU29ja2V0LklPXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFNvY2tldEhhbmRsZXIocmVxLCByZXMpIHtcclxuICAvLyBWw6lyaWZpZXIgc2kgU29ja2V0LklPIGEgZMOpasOgIMOpdMOpIGluaXRpYWxpc8OpXHJcbiAgaWYgKCFzb2NrZXRTZXJ2ZXIpIHtcclxuICAgIGNvbnNvbGUubG9nKCdJbml0aWFsaXNhdGlvbiBkdSBzZXJ2ZXVyIFNvY2tldC5JTycpO1xyXG4gICAgLy8gQ3LDqWVyIHVuZSBub3V2ZWxsZSBpbnN0YW5jZSBkdSBzZXJ2ZXVyIFNvY2tldC5JT1xyXG4gICAgc29ja2V0U2VydmVyID0gY3JlYXRlU29ja2V0U2VydmVyKHJlcy5zb2NrZXQuc2VydmVyKTtcclxuICB9XHJcblxyXG4gIC8vIFLDqXNvdWRyZSBsYSByZXF1w6p0ZSBlbiByZW52b3lhbnQgT0tcclxuICAvLyBTb2NrZXQuSU8gZ8OocmUgZMOpc29ybWFpcyBsYSBjb25uZXhpb24gV2ViU29ja2V0XHJcbiAgcmVzLmVuZCgnU29ja2V0LklPIGVzdCBwcsOqdCcpO1xyXG59XHJcblxyXG4vLyBEw6lzYWN0aXZlciBsYSBtaXNlIGVuIGZvcm1lIGRlcyByZXF1w6p0ZXMgcG91ciBwZXJtZXR0cmUgbGVzIFdlYlNvY2tldHNcclxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IHtcclxuICBhcGk6IHtcclxuICAgIGJvZHlQYXJzZXI6IGZhbHNlLFxyXG4gIH0sXHJcbn07ICJdLCJuYW1lcyI6WyJjcmVhdGVTb2NrZXRTZXJ2ZXIiLCJzb2NrZXRTZXJ2ZXIiLCJTb2NrZXRIYW5kbGVyIiwicmVxIiwicmVzIiwiY29uc29sZSIsImxvZyIsInNvY2tldCIsInNlcnZlciIsImVuZCIsImNvbmZpZyIsImFwaSIsImJvZHlQYXJzZXIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/pages/api/socket.js\n");

/***/ }),

/***/ "(api)/./src/server/socket-server.js":
/*!*************************************!*\
  !*** ./src/server/socket-server.js ***!
  \*************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createSocketServer: () => (/* binding */ createSocketServer)\n/* harmony export */ });\n/* harmony import */ var socket_io__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! socket.io */ \"socket.io\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([socket_io__WEBPACK_IMPORTED_MODULE_0__]);\nsocket_io__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n// Serveur Socket.IO pour l'application Diabertique\n// Simplifié sans dépendance à OpenAI\n\n// Stockage des sessions actives\nconst sessions = new Map();\n// Réponses prédéfinies pour simuler un assistant diabétique\nconst diabeticResponses = {\n    alimentation: [\n        \"Pour stabiliser votre glyc\\xe9mie, privil\\xe9giez les aliments \\xe0 faible indice glyc\\xe9mique comme les l\\xe9gumes, les l\\xe9gumineuses et les c\\xe9r\\xe9ales compl\\xe8tes.\",\n        \"Les prot\\xe9ines maigres comme le poulet, le poisson ou le tofu sont d'excellents choix pour les personnes diab\\xe9tiques.\",\n        \"Limitez votre consommation de sucres ajout\\xe9s et de glucides raffin\\xe9s pour mieux contr\\xf4ler votre diab\\xe8te.\"\n    ],\n    activité: [\n        \"30 minutes d'activit\\xe9 physique mod\\xe9r\\xe9e par jour peuvent aider \\xe0 am\\xe9liorer votre sensibilit\\xe9 \\xe0 l'insuline.\",\n        \"La marche rapide, la natation et le v\\xe9lo sont d'excellentes activit\\xe9s pour les personnes diab\\xe9tiques.\",\n        \"L'exercice r\\xe9gulier aide \\xe0 maintenir un poids sant\\xe9 et \\xe0 r\\xe9duire les risques de complications li\\xe9es au diab\\xe8te.\"\n    ],\n    médicaments: [\n        \"N'oubliez pas de prendre vos m\\xe9dicaments comme prescrit par votre m\\xe9decin, m\\xeame si vous vous sentez bien.\",\n        \"Surveillez attentivement vos niveaux de glyc\\xe9mie lorsque vous commencez un nouveau traitement.\",\n        \"Consultez toujours un professionnel de la sant\\xe9 avant de modifier votre traitement m\\xe9dicamenteux.\"\n    ],\n    symptômes: [\n        \"Les sympt\\xf4mes courants d'hyperglyc\\xe9mie comprennent une soif excessive, une miction fr\\xe9quente et une fatigue inhabituelle.\",\n        \"L'hypoglyc\\xe9mie peut provoquer des tremblements, des sueurs, des palpitations et des difficult\\xe9s de concentration.\",\n        \"Si vous ressentez des sympt\\xf4mes inhabituels, v\\xe9rifiez votre glyc\\xe9mie et consultez votre m\\xe9decin.\"\n    ],\n    général: [\n        \"Le diab\\xe8te est une maladie chronique qui n\\xe9cessite une surveillance r\\xe9guli\\xe8re et une bonne gestion au quotidien.\",\n        \"Une alimentation \\xe9quilibr\\xe9e, l'exercice r\\xe9gulier et un suivi m\\xe9dical sont essentiels pour g\\xe9rer efficacement le diab\\xe8te.\",\n        \"Les complications du diab\\xe8te peuvent \\xeatre \\xe9vit\\xe9es ou retard\\xe9es gr\\xe2ce \\xe0 un bon contr\\xf4le de la glyc\\xe9mie.\"\n    ]\n};\n// Transcriptions simulées pour les messages audio\nconst simulatedTranscriptions = [\n    \"Comment puis-je am\\xe9liorer mon alimentation pour mieux g\\xe9rer mon diab\\xe8te ?\",\n    \"Quels types d'exercices sont recommand\\xe9s pour les diab\\xe9tiques ?\",\n    \"Je ressens souvent de la fatigue apr\\xe8s les repas, est-ce normal ?\",\n    \"Quels sont les effets secondaires courants des m\\xe9dicaments contre le diab\\xe8te ?\",\n    \"Comment savoir si ma glyc\\xe9mie est trop \\xe9lev\\xe9e ou trop basse ?\"\n];\n// Fonction utilitaire pour les logs\nconst logMessage = (prefix, message)=>{\n    console.log(`[${new Date().toISOString()}] ${prefix}: ${typeof message === \"object\" ? JSON.stringify(message) : message}`);\n};\n// Gestion des erreurs\nconst handleError = (socket, error, message = \"Une erreur est survenue\")=>{\n    console.error(`[ERROR]: ${error.message || error}`);\n    socket.emit(\"error\", {\n        message,\n        details: error.message\n    });\n};\n// Générer une réponse basée sur le message de l'utilisateur\nconst generateResponse = (message)=>{\n    // Analyse simple des mots clés dans le message\n    const text = message.toLowerCase();\n    if (text.includes(\"aliment\") || text.includes(\"manger\") || text.includes(\"nourriture\") || text.includes(\"repas\")) {\n        return diabeticResponses.alimentation[Math.floor(Math.random() * diabeticResponses.alimentation.length)];\n    }\n    if (text.includes(\"exercice\") || text.includes(\"sport\") || text.includes(\"activit\\xe9\") || text.includes(\"bouger\")) {\n        return diabeticResponses.activité[Math.floor(Math.random() * diabeticResponses.activité.length)];\n    }\n    if (text.includes(\"m\\xe9dicament\") || text.includes(\"insuline\") || text.includes(\"traitement\") || text.includes(\"pilule\")) {\n        return diabeticResponses.médicaments[Math.floor(Math.random() * diabeticResponses.médicaments.length)];\n    }\n    if (text.includes(\"sympt\\xf4me\") || text.includes(\"fatigue\") || text.includes(\"soif\") || text.includes(\"uriner\")) {\n        return diabeticResponses.symptômes[Math.floor(Math.random() * diabeticResponses.symptômes.length)];\n    }\n    // Réponse par défaut\n    return diabeticResponses.général[Math.floor(Math.random() * diabeticResponses.général.length)];\n};\n// Initialiser une session\nconst initializeSession = (socket, sessionId, prompt)=>{\n    // Créer une nouvelle session\n    sessions.set(sessionId, {\n        id: sessionId,\n        socket,\n        prompt,\n        messages: [],\n        createdAt: new Date()\n    });\n    logMessage(\"Session initialis\\xe9e\", {\n        sessionId,\n        prompt\n    });\n    // Informer le client\n    socket.emit(\"session_initialized\", {\n        sessionId,\n        status: \"active\"\n    });\n};\n// Créer un serveur Socket.IO\nconst createSocketServer = (httpServer)=>{\n    // Configurer Socket.IO\n    const io = new socket_io__WEBPACK_IMPORTED_MODULE_0__.Server(httpServer, {\n        path: \"/api/socket\",\n        addTrailingSlash: false,\n        cors: {\n            origin: \"*\",\n            methods: [\n                \"GET\",\n                \"POST\"\n            ],\n            credentials: true\n        },\n        transports: [\n            \"polling\",\n            \"websocket\"\n        ],\n        allowUpgrades: true,\n        maxHttpBufferSize: 5 * 1024 * 1024,\n        pingTimeout: 60000,\n        pingInterval: 25000,\n        forcePolling: true\n    });\n    // Ajouter l'instance à l'objet server\n    httpServer.io = io;\n    // Configurer le gestionnaire d'erreurs du moteur Socket.IO\n    io.engine.on(\"connection_error\", (err)=>{\n        console.error(`[Socket.IO Engine Error]: ${err.code} - ${err.message}`);\n        console.error(err.context);\n    });\n    // Gérer les connexions clients\n    io.on(\"connection\", (socket)=>{\n        const sessionId = socket.handshake.query.session_id || `session_${Date.now()}`;\n        logMessage(\"Nouvelle connexion\", {\n            socketId: socket.id,\n            sessionId\n        });\n        // Événement de démarrage de session\n        socket.on(\"start_session\", (data)=>{\n            try {\n                initializeSession(socket, sessionId, data.prompt || \"Assistant diab\\xe9tique\");\n            } catch (error) {\n                handleError(socket, error, \"Impossible d'initialiser la session\");\n            }\n        });\n        // Événement de message texte\n        socket.on(\"message\", async (data)=>{\n            try {\n                if (!data || !data.text) {\n                    throw new Error(\"Message vide ou format incorrect\");\n                }\n                logMessage(\"Message re\\xe7u\", {\n                    sessionId,\n                    text: data.text\n                });\n                // Obtenir la session ou en créer une nouvelle\n                if (!sessions.has(sessionId)) {\n                    initializeSession(socket, sessionId, \"Conversation diab\\xe9tique\");\n                }\n                // Générer une réponse\n                const responseText = generateResponse(data.text);\n                // Ajouter les messages à l'historique\n                const session = sessions.get(sessionId);\n                session.messages.push({\n                    role: \"user\",\n                    content: data.text\n                }, {\n                    role: \"assistant\",\n                    content: responseText\n                });\n                // Envoyer la réponse au client\n                setTimeout(()=>{\n                    socket.emit(\"response\", {\n                        text: responseText\n                    });\n                }, 500); // Délai simulé pour donner l'impression de traitement\n            } catch (error) {\n                handleError(socket, error, \"Erreur lors du traitement du message\");\n            }\n        });\n        // Événement de réception audio\n        socket.on(\"audio\", async (data)=>{\n            try {\n                if (!data || !data.audio) {\n                    throw new Error(\"Donn\\xe9es audio vides ou format incorrect\");\n                }\n                logMessage(\"Audio re\\xe7u\", {\n                    sessionId,\n                    format: data.format,\n                    size: data.audio.length\n                });\n                // Simuler le traitement audio\n                setTimeout(()=>{\n                    // Simuler une transcription\n                    const transcription = simulatedTranscriptions[Math.floor(Math.random() * simulatedTranscriptions.length)];\n                    // Envoyer la transcription au client\n                    socket.emit(\"transcription\", {\n                        text: transcription\n                    });\n                    // Générer une réponse\n                    const responseText = generateResponse(transcription);\n                    // Obtenir la session ou en créer une nouvelle\n                    if (!sessions.has(sessionId)) {\n                        initializeSession(socket, sessionId, \"Conversation audio diab\\xe9tique\");\n                    }\n                    // Ajouter les messages à l'historique\n                    const session = sessions.get(sessionId);\n                    session.messages.push({\n                        role: \"user\",\n                        content: transcription\n                    }, {\n                        role: \"assistant\",\n                        content: responseText\n                    });\n                    // Envoyer la réponse au client\n                    setTimeout(()=>{\n                        socket.emit(\"response\", {\n                            text: responseText\n                        });\n                    }, 800); // Délai supplémentaire pour simuler le traitement\n                }, 1500); // Simuler le temps de traitement audio\n            } catch (error) {\n                handleError(socket, error, \"Erreur lors du traitement de l'audio\");\n            }\n        });\n        // Événement de déconnexion\n        socket.on(\"disconnect\", (reason)=>{\n            logMessage(\"Client d\\xe9connect\\xe9\", {\n                sessionId,\n                reason\n            });\n        // Conserver la session pour une éventuelle reconnexion\n        // Vous pourriez implémenter un mécanisme pour nettoyer les sessions inactives\n        });\n    });\n    logMessage(\"Serveur Socket.IO initialis\\xe9\", {});\n    return io;\n};\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNGO1FBRUEsMkJBQTJCO1FBQzNCRCxPQUFPb0MsRUFBRSxDQUFDLGNBQWMsQ0FBQ3VCO1lBQ3ZCckUsV0FBVywyQkFBcUI7Z0JBQUV1QjtnQkFBVzhDO1lBQU87UUFFcEQsdURBQXVEO1FBQ3ZELDhFQUE4RTtRQUNoRjtJQUNGO0lBRUFyRSxXQUFXLG1DQUFnQyxDQUFDO0lBRTVDLE9BQU9nQztBQUNULEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kaWFiZXJ0aXF1ZS8uL3NyYy9zZXJ2ZXIvc29ja2V0LXNlcnZlci5qcz84NzAxIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFNlcnZldXIgU29ja2V0LklPIHBvdXIgbCdhcHBsaWNhdGlvbiBEaWFiZXJ0aXF1ZVxyXG4vLyBTaW1wbGlmacOpIHNhbnMgZMOpcGVuZGFuY2Ugw6AgT3BlbkFJXHJcblxyXG5pbXBvcnQgeyBTZXJ2ZXIgfSBmcm9tICdzb2NrZXQuaW8nO1xyXG5cclxuLy8gU3RvY2thZ2UgZGVzIHNlc3Npb25zIGFjdGl2ZXNcclxuY29uc3Qgc2Vzc2lvbnMgPSBuZXcgTWFwKCk7XHJcblxyXG4vLyBSw6lwb25zZXMgcHLDqWTDqWZpbmllcyBwb3VyIHNpbXVsZXIgdW4gYXNzaXN0YW50IGRpYWLDqXRpcXVlXHJcbmNvbnN0IGRpYWJldGljUmVzcG9uc2VzID0ge1xyXG4gIGFsaW1lbnRhdGlvbjogW1xyXG4gICAgXCJQb3VyIHN0YWJpbGlzZXIgdm90cmUgZ2x5Y8OpbWllLCBwcml2aWzDqWdpZXogbGVzIGFsaW1lbnRzIMOgIGZhaWJsZSBpbmRpY2UgZ2x5Y8OpbWlxdWUgY29tbWUgbGVzIGzDqWd1bWVzLCBsZXMgbMOpZ3VtaW5ldXNlcyBldCBsZXMgY8OpcsOpYWxlcyBjb21wbMOodGVzLlwiLFxyXG4gICAgXCJMZXMgcHJvdMOpaW5lcyBtYWlncmVzIGNvbW1lIGxlIHBvdWxldCwgbGUgcG9pc3NvbiBvdSBsZSB0b2Z1IHNvbnQgZCdleGNlbGxlbnRzIGNob2l4IHBvdXIgbGVzIHBlcnNvbm5lcyBkaWFiw6l0aXF1ZXMuXCIsXHJcbiAgICBcIkxpbWl0ZXogdm90cmUgY29uc29tbWF0aW9uIGRlIHN1Y3JlcyBham91dMOpcyBldCBkZSBnbHVjaWRlcyByYWZmaW7DqXMgcG91ciBtaWV1eCBjb250csO0bGVyIHZvdHJlIGRpYWLDqHRlLlwiXHJcbiAgXSxcclxuICBhY3Rpdml0w6k6IFtcclxuICAgIFwiMzAgbWludXRlcyBkJ2FjdGl2aXTDqSBwaHlzaXF1ZSBtb2TDqXLDqWUgcGFyIGpvdXIgcGV1dmVudCBhaWRlciDDoCBhbcOpbGlvcmVyIHZvdHJlIHNlbnNpYmlsaXTDqSDDoCBsJ2luc3VsaW5lLlwiLFxyXG4gICAgXCJMYSBtYXJjaGUgcmFwaWRlLCBsYSBuYXRhdGlvbiBldCBsZSB2w6lsbyBzb250IGQnZXhjZWxsZW50ZXMgYWN0aXZpdMOpcyBwb3VyIGxlcyBwZXJzb25uZXMgZGlhYsOpdGlxdWVzLlwiLFxyXG4gICAgXCJMJ2V4ZXJjaWNlIHLDqWd1bGllciBhaWRlIMOgIG1haW50ZW5pciB1biBwb2lkcyBzYW50w6kgZXQgw6AgcsOpZHVpcmUgbGVzIHJpc3F1ZXMgZGUgY29tcGxpY2F0aW9ucyBsacOpZXMgYXUgZGlhYsOodGUuXCJcclxuICBdLFxyXG4gIG3DqWRpY2FtZW50czogW1xyXG4gICAgXCJOJ291YmxpZXogcGFzIGRlIHByZW5kcmUgdm9zIG3DqWRpY2FtZW50cyBjb21tZSBwcmVzY3JpdCBwYXIgdm90cmUgbcOpZGVjaW4sIG3Dqm1lIHNpIHZvdXMgdm91cyBzZW50ZXogYmllbi5cIixcclxuICAgIFwiU3VydmVpbGxleiBhdHRlbnRpdmVtZW50IHZvcyBuaXZlYXV4IGRlIGdseWPDqW1pZSBsb3JzcXVlIHZvdXMgY29tbWVuY2V6IHVuIG5vdXZlYXUgdHJhaXRlbWVudC5cIixcclxuICAgIFwiQ29uc3VsdGV6IHRvdWpvdXJzIHVuIHByb2Zlc3Npb25uZWwgZGUgbGEgc2FudMOpIGF2YW50IGRlIG1vZGlmaWVyIHZvdHJlIHRyYWl0ZW1lbnQgbcOpZGljYW1lbnRldXguXCJcclxuICBdLFxyXG4gIHN5bXB0w7RtZXM6IFtcclxuICAgIFwiTGVzIHN5bXB0w7RtZXMgY291cmFudHMgZCdoeXBlcmdseWPDqW1pZSBjb21wcmVubmVudCB1bmUgc29pZiBleGNlc3NpdmUsIHVuZSBtaWN0aW9uIGZyw6lxdWVudGUgZXQgdW5lIGZhdGlndWUgaW5oYWJpdHVlbGxlLlwiLFxyXG4gICAgXCJMJ2h5cG9nbHljw6ltaWUgcGV1dCBwcm92b3F1ZXIgZGVzIHRyZW1ibGVtZW50cywgZGVzIHN1ZXVycywgZGVzIHBhbHBpdGF0aW9ucyBldCBkZXMgZGlmZmljdWx0w6lzIGRlIGNvbmNlbnRyYXRpb24uXCIsXHJcbiAgICBcIlNpIHZvdXMgcmVzc2VudGV6IGRlcyBzeW1wdMO0bWVzIGluaGFiaXR1ZWxzLCB2w6lyaWZpZXogdm90cmUgZ2x5Y8OpbWllIGV0IGNvbnN1bHRleiB2b3RyZSBtw6lkZWNpbi5cIlxyXG4gIF0sXHJcbiAgZ8OpbsOpcmFsOiBbXHJcbiAgICBcIkxlIGRpYWLDqHRlIGVzdCB1bmUgbWFsYWRpZSBjaHJvbmlxdWUgcXVpIG7DqWNlc3NpdGUgdW5lIHN1cnZlaWxsYW5jZSByw6lndWxpw6hyZSBldCB1bmUgYm9ubmUgZ2VzdGlvbiBhdSBxdW90aWRpZW4uXCIsXHJcbiAgICBcIlVuZSBhbGltZW50YXRpb24gw6lxdWlsaWJyw6llLCBsJ2V4ZXJjaWNlIHLDqWd1bGllciBldCB1biBzdWl2aSBtw6lkaWNhbCBzb250IGVzc2VudGllbHMgcG91ciBnw6lyZXIgZWZmaWNhY2VtZW50IGxlIGRpYWLDqHRlLlwiLFxyXG4gICAgXCJMZXMgY29tcGxpY2F0aW9ucyBkdSBkaWFiw6h0ZSBwZXV2ZW50IMOqdHJlIMOpdml0w6llcyBvdSByZXRhcmTDqWVzIGdyw6JjZSDDoCB1biBib24gY29udHLDtGxlIGRlIGxhIGdseWPDqW1pZS5cIlxyXG4gIF1cclxufTtcclxuXHJcbi8vIFRyYW5zY3JpcHRpb25zIHNpbXVsw6llcyBwb3VyIGxlcyBtZXNzYWdlcyBhdWRpb1xyXG5jb25zdCBzaW11bGF0ZWRUcmFuc2NyaXB0aW9ucyA9IFtcclxuICBcIkNvbW1lbnQgcHVpcy1qZSBhbcOpbGlvcmVyIG1vbiBhbGltZW50YXRpb24gcG91ciBtaWV1eCBnw6lyZXIgbW9uIGRpYWLDqHRlID9cIixcclxuICBcIlF1ZWxzIHR5cGVzIGQnZXhlcmNpY2VzIHNvbnQgcmVjb21tYW5kw6lzIHBvdXIgbGVzIGRpYWLDqXRpcXVlcyA/XCIsXHJcbiAgXCJKZSByZXNzZW5zIHNvdXZlbnQgZGUgbGEgZmF0aWd1ZSBhcHLDqHMgbGVzIHJlcGFzLCBlc3QtY2Ugbm9ybWFsID9cIixcclxuICBcIlF1ZWxzIHNvbnQgbGVzIGVmZmV0cyBzZWNvbmRhaXJlcyBjb3VyYW50cyBkZXMgbcOpZGljYW1lbnRzIGNvbnRyZSBsZSBkaWFiw6h0ZSA/XCIsXHJcbiAgXCJDb21tZW50IHNhdm9pciBzaSBtYSBnbHljw6ltaWUgZXN0IHRyb3Agw6lsZXbDqWUgb3UgdHJvcCBiYXNzZSA/XCJcclxuXTtcclxuXHJcbi8vIEZvbmN0aW9uIHV0aWxpdGFpcmUgcG91ciBsZXMgbG9nc1xyXG5jb25zdCBsb2dNZXNzYWdlID0gKHByZWZpeCwgbWVzc2FnZSkgPT4ge1xyXG4gIGNvbnNvbGUubG9nKGBbJHtuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCl9XSAke3ByZWZpeH06ICR7dHlwZW9mIG1lc3NhZ2UgPT09ICdvYmplY3QnID8gSlNPTi5zdHJpbmdpZnkobWVzc2FnZSkgOiBtZXNzYWdlfWApO1xyXG59O1xyXG5cclxuLy8gR2VzdGlvbiBkZXMgZXJyZXVyc1xyXG5jb25zdCBoYW5kbGVFcnJvciA9IChzb2NrZXQsIGVycm9yLCBtZXNzYWdlID0gXCJVbmUgZXJyZXVyIGVzdCBzdXJ2ZW51ZVwiKSA9PiB7XHJcbiAgY29uc29sZS5lcnJvcihgW0VSUk9SXTogJHtlcnJvci5tZXNzYWdlIHx8IGVycm9yfWApO1xyXG4gIHNvY2tldC5lbWl0KCdlcnJvcicsIHsgbWVzc2FnZSwgZGV0YWlsczogZXJyb3IubWVzc2FnZSB9KTtcclxufTtcclxuXHJcbi8vIEfDqW7DqXJlciB1bmUgcsOpcG9uc2UgYmFzw6llIHN1ciBsZSBtZXNzYWdlIGRlIGwndXRpbGlzYXRldXJcclxuY29uc3QgZ2VuZXJhdGVSZXNwb25zZSA9IChtZXNzYWdlKSA9PiB7XHJcbiAgLy8gQW5hbHlzZSBzaW1wbGUgZGVzIG1vdHMgY2zDqXMgZGFucyBsZSBtZXNzYWdlXHJcbiAgY29uc3QgdGV4dCA9IG1lc3NhZ2UudG9Mb3dlckNhc2UoKTtcclxuICBcclxuICBpZiAodGV4dC5pbmNsdWRlcygnYWxpbWVudCcpIHx8IHRleHQuaW5jbHVkZXMoJ21hbmdlcicpIHx8IHRleHQuaW5jbHVkZXMoJ25vdXJyaXR1cmUnKSB8fCB0ZXh0LmluY2x1ZGVzKCdyZXBhcycpKSB7XHJcbiAgICByZXR1cm4gZGlhYmV0aWNSZXNwb25zZXMuYWxpbWVudGF0aW9uW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGRpYWJldGljUmVzcG9uc2VzLmFsaW1lbnRhdGlvbi5sZW5ndGgpXTtcclxuICB9XHJcbiAgXHJcbiAgaWYgKHRleHQuaW5jbHVkZXMoJ2V4ZXJjaWNlJykgfHwgdGV4dC5pbmNsdWRlcygnc3BvcnQnKSB8fCB0ZXh0LmluY2x1ZGVzKCdhY3Rpdml0w6knKSB8fCB0ZXh0LmluY2x1ZGVzKCdib3VnZXInKSkge1xyXG4gICAgcmV0dXJuIGRpYWJldGljUmVzcG9uc2VzLmFjdGl2aXTDqVtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBkaWFiZXRpY1Jlc3BvbnNlcy5hY3Rpdml0w6kubGVuZ3RoKV07XHJcbiAgfVxyXG4gIFxyXG4gIGlmICh0ZXh0LmluY2x1ZGVzKCdtw6lkaWNhbWVudCcpIHx8IHRleHQuaW5jbHVkZXMoJ2luc3VsaW5lJykgfHwgdGV4dC5pbmNsdWRlcygndHJhaXRlbWVudCcpIHx8IHRleHQuaW5jbHVkZXMoJ3BpbHVsZScpKSB7XHJcbiAgICByZXR1cm4gZGlhYmV0aWNSZXNwb25zZXMubcOpZGljYW1lbnRzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGRpYWJldGljUmVzcG9uc2VzLm3DqWRpY2FtZW50cy5sZW5ndGgpXTtcclxuICB9XHJcbiAgXHJcbiAgaWYgKHRleHQuaW5jbHVkZXMoJ3N5bXB0w7RtZScpIHx8IHRleHQuaW5jbHVkZXMoJ2ZhdGlndWUnKSB8fCB0ZXh0LmluY2x1ZGVzKCdzb2lmJykgfHwgdGV4dC5pbmNsdWRlcygndXJpbmVyJykpIHtcclxuICAgIHJldHVybiBkaWFiZXRpY1Jlc3BvbnNlcy5zeW1wdMO0bWVzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGRpYWJldGljUmVzcG9uc2VzLnN5bXB0w7RtZXMubGVuZ3RoKV07XHJcbiAgfVxyXG4gIFxyXG4gIC8vIFLDqXBvbnNlIHBhciBkw6lmYXV0XHJcbiAgcmV0dXJuIGRpYWJldGljUmVzcG9uc2VzLmfDqW7DqXJhbFtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBkaWFiZXRpY1Jlc3BvbnNlcy5nw6luw6lyYWwubGVuZ3RoKV07XHJcbn07XHJcblxyXG4vLyBJbml0aWFsaXNlciB1bmUgc2Vzc2lvblxyXG5jb25zdCBpbml0aWFsaXplU2Vzc2lvbiA9IChzb2NrZXQsIHNlc3Npb25JZCwgcHJvbXB0KSA9PiB7XHJcbiAgLy8gQ3LDqWVyIHVuZSBub3V2ZWxsZSBzZXNzaW9uXHJcbiAgc2Vzc2lvbnMuc2V0KHNlc3Npb25JZCwge1xyXG4gICAgaWQ6IHNlc3Npb25JZCxcclxuICAgIHNvY2tldCxcclxuICAgIHByb21wdCxcclxuICAgIG1lc3NhZ2VzOiBbXSxcclxuICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKVxyXG4gIH0pO1xyXG4gIFxyXG4gIGxvZ01lc3NhZ2UoJ1Nlc3Npb24gaW5pdGlhbGlzw6llJywgeyBzZXNzaW9uSWQsIHByb21wdCB9KTtcclxuICBcclxuICAvLyBJbmZvcm1lciBsZSBjbGllbnRcclxuICBzb2NrZXQuZW1pdCgnc2Vzc2lvbl9pbml0aWFsaXplZCcsIHsgc2Vzc2lvbklkLCBzdGF0dXM6ICdhY3RpdmUnIH0pO1xyXG59O1xyXG5cclxuLy8gQ3LDqWVyIHVuIHNlcnZldXIgU29ja2V0LklPXHJcbmV4cG9ydCBjb25zdCBjcmVhdGVTb2NrZXRTZXJ2ZXIgPSAoaHR0cFNlcnZlcikgPT4ge1xyXG4gIC8vIENvbmZpZ3VyZXIgU29ja2V0LklPXHJcbiAgY29uc3QgaW8gPSBuZXcgU2VydmVyKGh0dHBTZXJ2ZXIsIHtcclxuICAgIHBhdGg6ICcvYXBpL3NvY2tldCcsXHJcbiAgICBhZGRUcmFpbGluZ1NsYXNoOiBmYWxzZSxcclxuICAgIGNvcnM6IHtcclxuICAgICAgb3JpZ2luOiAnKicsXHJcbiAgICAgIG1ldGhvZHM6IFsnR0VUJywgJ1BPU1QnXSxcclxuICAgICAgY3JlZGVudGlhbHM6IHRydWVcclxuICAgIH0sXHJcbiAgICB0cmFuc3BvcnRzOiBbJ3BvbGxpbmcnLCAnd2Vic29ja2V0J10sXHJcbiAgICBhbGxvd1VwZ3JhZGVzOiB0cnVlLFxyXG4gICAgbWF4SHR0cEJ1ZmZlclNpemU6IDUgKiAxMDI0ICogMTAyNCwgLy8gNU1CIHBvdXIgbGVzIGZpY2hpZXJzIGF1ZGlvXHJcbiAgICBwaW5nVGltZW91dDogNjAwMDAsXHJcbiAgICBwaW5nSW50ZXJ2YWw6IDI1MDAwLFxyXG4gICAgZm9yY2VQb2xsaW5nOiB0cnVlXHJcbiAgfSk7XHJcbiAgXHJcbiAgLy8gQWpvdXRlciBsJ2luc3RhbmNlIMOgIGwnb2JqZXQgc2VydmVyXHJcbiAgaHR0cFNlcnZlci5pbyA9IGlvO1xyXG4gIFxyXG4gIC8vIENvbmZpZ3VyZXIgbGUgZ2VzdGlvbm5haXJlIGQnZXJyZXVycyBkdSBtb3RldXIgU29ja2V0LklPXHJcbiAgaW8uZW5naW5lLm9uKCdjb25uZWN0aW9uX2Vycm9yJywgKGVycikgPT4ge1xyXG4gICAgY29uc29sZS5lcnJvcihgW1NvY2tldC5JTyBFbmdpbmUgRXJyb3JdOiAke2Vyci5jb2RlfSAtICR7ZXJyLm1lc3NhZ2V9YCk7XHJcbiAgICBjb25zb2xlLmVycm9yKGVyci5jb250ZXh0KTtcclxuICB9KTtcclxuICBcclxuICAvLyBHw6lyZXIgbGVzIGNvbm5leGlvbnMgY2xpZW50c1xyXG4gIGlvLm9uKCdjb25uZWN0aW9uJywgKHNvY2tldCkgPT4ge1xyXG4gICAgY29uc3Qgc2Vzc2lvbklkID0gc29ja2V0LmhhbmRzaGFrZS5xdWVyeS5zZXNzaW9uX2lkIHx8IGBzZXNzaW9uXyR7RGF0ZS5ub3coKX1gO1xyXG4gICAgXHJcbiAgICBsb2dNZXNzYWdlKCdOb3V2ZWxsZSBjb25uZXhpb24nLCB7IHNvY2tldElkOiBzb2NrZXQuaWQsIHNlc3Npb25JZCB9KTtcclxuICAgIFxyXG4gICAgLy8gw4l2w6luZW1lbnQgZGUgZMOpbWFycmFnZSBkZSBzZXNzaW9uXHJcbiAgICBzb2NrZXQub24oJ3N0YXJ0X3Nlc3Npb24nLCAoZGF0YSkgPT4ge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGluaXRpYWxpemVTZXNzaW9uKHNvY2tldCwgc2Vzc2lvbklkLCBkYXRhLnByb21wdCB8fCAnQXNzaXN0YW50IGRpYWLDqXRpcXVlJyk7XHJcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgaGFuZGxlRXJyb3Ioc29ja2V0LCBlcnJvciwgXCJJbXBvc3NpYmxlIGQnaW5pdGlhbGlzZXIgbGEgc2Vzc2lvblwiKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIC8vIMOJdsOpbmVtZW50IGRlIG1lc3NhZ2UgdGV4dGVcclxuICAgIHNvY2tldC5vbignbWVzc2FnZScsIGFzeW5jIChkYXRhKSA9PiB7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgaWYgKCFkYXRhIHx8ICFkYXRhLnRleHQpIHtcclxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk1lc3NhZ2UgdmlkZSBvdSBmb3JtYXQgaW5jb3JyZWN0XCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBsb2dNZXNzYWdlKCdNZXNzYWdlIHJlw6d1JywgeyBzZXNzaW9uSWQsIHRleHQ6IGRhdGEudGV4dCB9KTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBPYnRlbmlyIGxhIHNlc3Npb24gb3UgZW4gY3LDqWVyIHVuZSBub3V2ZWxsZVxyXG4gICAgICAgIGlmICghc2Vzc2lvbnMuaGFzKHNlc3Npb25JZCkpIHtcclxuICAgICAgICAgIGluaXRpYWxpemVTZXNzaW9uKHNvY2tldCwgc2Vzc2lvbklkLCAnQ29udmVyc2F0aW9uIGRpYWLDqXRpcXVlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIEfDqW7DqXJlciB1bmUgcsOpcG9uc2VcclxuICAgICAgICBjb25zdCByZXNwb25zZVRleHQgPSBnZW5lcmF0ZVJlc3BvbnNlKGRhdGEudGV4dCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gQWpvdXRlciBsZXMgbWVzc2FnZXMgw6AgbCdoaXN0b3JpcXVlXHJcbiAgICAgICAgY29uc3Qgc2Vzc2lvbiA9IHNlc3Npb25zLmdldChzZXNzaW9uSWQpO1xyXG4gICAgICAgIHNlc3Npb24ubWVzc2FnZXMucHVzaChcclxuICAgICAgICAgIHsgcm9sZTogJ3VzZXInLCBjb250ZW50OiBkYXRhLnRleHQgfSxcclxuICAgICAgICAgIHsgcm9sZTogJ2Fzc2lzdGFudCcsIGNvbnRlbnQ6IHJlc3BvbnNlVGV4dCB9XHJcbiAgICAgICAgKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBFbnZveWVyIGxhIHLDqXBvbnNlIGF1IGNsaWVudFxyXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgc29ja2V0LmVtaXQoJ3Jlc3BvbnNlJywgeyB0ZXh0OiByZXNwb25zZVRleHQgfSk7XHJcbiAgICAgICAgfSwgNTAwKTsgLy8gRMOpbGFpIHNpbXVsw6kgcG91ciBkb25uZXIgbCdpbXByZXNzaW9uIGRlIHRyYWl0ZW1lbnRcclxuICAgICAgICBcclxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBoYW5kbGVFcnJvcihzb2NrZXQsIGVycm9yLCBcIkVycmV1ciBsb3JzIGR1IHRyYWl0ZW1lbnQgZHUgbWVzc2FnZVwiKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIC8vIMOJdsOpbmVtZW50IGRlIHLDqWNlcHRpb24gYXVkaW9cclxuICAgIHNvY2tldC5vbignYXVkaW8nLCBhc3luYyAoZGF0YSkgPT4ge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGlmICghZGF0YSB8fCAhZGF0YS5hdWRpbykge1xyXG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRG9ubsOpZXMgYXVkaW8gdmlkZXMgb3UgZm9ybWF0IGluY29ycmVjdFwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgbG9nTWVzc2FnZSgnQXVkaW8gcmXDp3UnLCB7IHNlc3Npb25JZCwgZm9ybWF0OiBkYXRhLmZvcm1hdCwgc2l6ZTogZGF0YS5hdWRpby5sZW5ndGggfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gU2ltdWxlciBsZSB0cmFpdGVtZW50IGF1ZGlvXHJcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAvLyBTaW11bGVyIHVuZSB0cmFuc2NyaXB0aW9uXHJcbiAgICAgICAgICBjb25zdCB0cmFuc2NyaXB0aW9uID0gc2ltdWxhdGVkVHJhbnNjcmlwdGlvbnNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogc2ltdWxhdGVkVHJhbnNjcmlwdGlvbnMubGVuZ3RoKV07XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIC8vIEVudm95ZXIgbGEgdHJhbnNjcmlwdGlvbiBhdSBjbGllbnRcclxuICAgICAgICAgIHNvY2tldC5lbWl0KCd0cmFuc2NyaXB0aW9uJywgeyB0ZXh0OiB0cmFuc2NyaXB0aW9uIH0pO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICAvLyBHw6luw6lyZXIgdW5lIHLDqXBvbnNlXHJcbiAgICAgICAgICBjb25zdCByZXNwb25zZVRleHQgPSBnZW5lcmF0ZVJlc3BvbnNlKHRyYW5zY3JpcHRpb24pO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICAvLyBPYnRlbmlyIGxhIHNlc3Npb24gb3UgZW4gY3LDqWVyIHVuZSBub3V2ZWxsZVxyXG4gICAgICAgICAgaWYgKCFzZXNzaW9ucy5oYXMoc2Vzc2lvbklkKSkge1xyXG4gICAgICAgICAgICBpbml0aWFsaXplU2Vzc2lvbihzb2NrZXQsIHNlc3Npb25JZCwgJ0NvbnZlcnNhdGlvbiBhdWRpbyBkaWFiw6l0aXF1ZScpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICAvLyBBam91dGVyIGxlcyBtZXNzYWdlcyDDoCBsJ2hpc3RvcmlxdWVcclxuICAgICAgICAgIGNvbnN0IHNlc3Npb24gPSBzZXNzaW9ucy5nZXQoc2Vzc2lvbklkKTtcclxuICAgICAgICAgIHNlc3Npb24ubWVzc2FnZXMucHVzaChcclxuICAgICAgICAgICAgeyByb2xlOiAndXNlcicsIGNvbnRlbnQ6IHRyYW5zY3JpcHRpb24gfSxcclxuICAgICAgICAgICAgeyByb2xlOiAnYXNzaXN0YW50JywgY29udGVudDogcmVzcG9uc2VUZXh0IH1cclxuICAgICAgICAgICk7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIC8vIEVudm95ZXIgbGEgcsOpcG9uc2UgYXUgY2xpZW50XHJcbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgc29ja2V0LmVtaXQoJ3Jlc3BvbnNlJywgeyB0ZXh0OiByZXNwb25zZVRleHQgfSk7XHJcbiAgICAgICAgICB9LCA4MDApOyAvLyBEw6lsYWkgc3VwcGzDqW1lbnRhaXJlIHBvdXIgc2ltdWxlciBsZSB0cmFpdGVtZW50XHJcbiAgICAgICAgICBcclxuICAgICAgICB9LCAxNTAwKTsgLy8gU2ltdWxlciBsZSB0ZW1wcyBkZSB0cmFpdGVtZW50IGF1ZGlvXHJcbiAgICAgICAgXHJcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgaGFuZGxlRXJyb3Ioc29ja2V0LCBlcnJvciwgXCJFcnJldXIgbG9ycyBkdSB0cmFpdGVtZW50IGRlIGwnYXVkaW9cIik7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICAvLyDDiXbDqW5lbWVudCBkZSBkw6ljb25uZXhpb25cclxuICAgIHNvY2tldC5vbignZGlzY29ubmVjdCcsIChyZWFzb24pID0+IHtcclxuICAgICAgbG9nTWVzc2FnZSgnQ2xpZW50IGTDqWNvbm5lY3TDqScsIHsgc2Vzc2lvbklkLCByZWFzb24gfSk7XHJcbiAgICAgIFxyXG4gICAgICAvLyBDb25zZXJ2ZXIgbGEgc2Vzc2lvbiBwb3VyIHVuZSDDqXZlbnR1ZWxsZSByZWNvbm5leGlvblxyXG4gICAgICAvLyBWb3VzIHBvdXJyaWV6IGltcGzDqW1lbnRlciB1biBtw6ljYW5pc21lIHBvdXIgbmV0dG95ZXIgbGVzIHNlc3Npb25zIGluYWN0aXZlc1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcbiAgXHJcbiAgbG9nTWVzc2FnZSgnU2VydmV1ciBTb2NrZXQuSU8gaW5pdGlhbGlzw6knLCB7fSk7XHJcbiAgXHJcbiAgcmV0dXJuIGlvO1xyXG59OyAiXSwibmFtZXMiOlsiU2VydmVyIiwic2Vzc2lvbnMiLCJNYXAiLCJkaWFiZXRpY1Jlc3BvbnNlcyIsImFsaW1lbnRhdGlvbiIsImFjdGl2aXTDqSIsIm3DqWRpY2FtZW50cyIsInN5bXB0w7RtZXMiLCJnw6luw6lyYWwiLCJzaW11bGF0ZWRUcmFuc2NyaXB0aW9ucyIsImxvZ01lc3NhZ2UiLCJwcmVmaXgiLCJtZXNzYWdlIiwiY29uc29sZSIsImxvZyIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsIkpTT04iLCJzdHJpbmdpZnkiLCJoYW5kbGVFcnJvciIsInNvY2tldCIsImVycm9yIiwiZW1pdCIsImRldGFpbHMiLCJnZW5lcmF0ZVJlc3BvbnNlIiwidGV4dCIsInRvTG93ZXJDYXNlIiwiaW5jbHVkZXMiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJsZW5ndGgiLCJpbml0aWFsaXplU2Vzc2lvbiIsInNlc3Npb25JZCIsInByb21wdCIsInNldCIsImlkIiwibWVzc2FnZXMiLCJjcmVhdGVkQXQiLCJzdGF0dXMiLCJjcmVhdGVTb2NrZXRTZXJ2ZXIiLCJodHRwU2VydmVyIiwiaW8iLCJwYXRoIiwiYWRkVHJhaWxpbmdTbGFzaCIsImNvcnMiLCJvcmlnaW4iLCJtZXRob2RzIiwiY3JlZGVudGlhbHMiLCJ0cmFuc3BvcnRzIiwiYWxsb3dVcGdyYWRlcyIsIm1heEh0dHBCdWZmZXJTaXplIiwicGluZ1RpbWVvdXQiLCJwaW5nSW50ZXJ2YWwiLCJmb3JjZVBvbGxpbmciLCJlbmdpbmUiLCJvbiIsImVyciIsImNvZGUiLCJjb250ZXh0IiwiaGFuZHNoYWtlIiwicXVlcnkiLCJzZXNzaW9uX2lkIiwibm93Iiwic29ja2V0SWQiLCJkYXRhIiwiRXJyb3IiLCJoYXMiLCJyZXNwb25zZVRleHQiLCJzZXNzaW9uIiwiZ2V0IiwicHVzaCIsInJvbGUiLCJjb250ZW50Iiwic2V0VGltZW91dCIsImF1ZGlvIiwiZm9ybWF0Iiwic2l6ZSIsInRyYW5zY3JpcHRpb24iLCJyZWFzb24iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/server/socket-server.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fsocket&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Csocket.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();